parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"CJJZ":[function(require,module,exports) {
module.exports=function(r,e){return Array.prototype.slice.call(r,e)};
},{}],"SzqS":[function(require,module,exports) {
var e,t="function"==typeof setImmediate;e=t?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},module.exports=e;
},{}],"vjHB":[function(require,module,exports) {
"use strict";var t=require("ticky");module.exports=function(u,e,i){u&&t(function(){u.apply(i||null,e||[])})};
},{"ticky":"SzqS"}],"qraR":[function(require,module,exports) {
"use strict";var e=require("atoa"),n=require("./debounce");module.exports=function(r,t){var o=t||{},i={};return void 0===r&&(r={}),r.on=function(e,n){return i[e]?i[e].push(n):i[e]=[n],r},r.once=function(e,n){return n._once=!0,r.on(e,n),r},r.off=function(e,n){var t=arguments.length;if(1===t)delete i[e];else if(0===t)i={};else{var o=i[e];if(!o)return r;o.splice(o.indexOf(n),1)}return r},r.emit=function(){var n=e(arguments);return r.emitterSnapshot(n.shift()).apply(this,n)},r.emitterSnapshot=function(t){var u=(i[t]||[]).slice(0);return function(){var i=e(arguments),f=this||r;if("error"===t&&!1!==o.throws&&!u.length)throw 1===i.length?i[0]:i;return u.forEach(function(e){o.async?n(e,i,f):e.apply(f,i),e._once&&r.off(t,e)}),r}},r};
},{"atoa":"CJJZ","./debounce":"vjHB"}],"Ir8B":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t=e.CustomEvent;function n(){try{var e=new t("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(n){}return!1}module.exports=n()?t:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n};
},{}],"U5ks":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],s=[],o="",r=/^on/;for(o in e)r.test(o)&&s.push(o.slice(2));module.exports=s;
},{}],"EA8M":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t=require("custom-event"),n=require("./eventmap"),r=e.document,a=c,i=v,u=[];function c(e,t,n,r){return e.addEventListener(t,n,r)}function o(e,t,n){return e.attachEvent("on"+t,d(e,t,n))}function v(e,t,n,r){return e.removeEventListener(t,n,r)}function f(e,t,n){var r=l(e,t,n);if(r)return e.detachEvent("on"+t,r)}function p(e,a,i){var u=-1===n.indexOf(a)?new t(a,{detail:i}):function(){var e;r.createEvent?(e=r.createEvent("Event")).initEvent(a,!0,!0):r.createEventObject&&(e=r.createEventObject());return e}();e.dispatchEvent?e.dispatchEvent(u):e.fireEvent("on"+a,u)}function E(t,n,r){return function(n){var a=n||e.event;a.target=a.target||a.srcElement,a.preventDefault=a.preventDefault||function(){a.returnValue=!1},a.stopPropagation=a.stopPropagation||function(){a.cancelBubble=!0},a.which=a.which||a.keyCode,r.call(t,a)}}function d(e,t,n){var r=l(e,t,n)||E(e,t,n);return u.push({wrapper:r,element:e,type:t,fn:n}),r}function l(e,t,n){var r=s(e,t,n);if(r){var a=u[r].wrapper;return u.splice(r,1),a}}function s(e,t,n){var r,a;for(r=0;r<u.length;r++)if((a=u[r]).element===e&&a.type===t&&a.fn===n)return r}e.addEventListener||(a=o,i=f),module.exports={add:a,remove:i,fabricate:p};
},{"custom-event":"Ir8B","./eventmap":"U5ks"}],"ivgg":[function(require,module,exports) {
"use strict";var s={},a="(?:^|\\s)",e="(?:\\s|$)";function t(t){var c=s[t];return c?c.lastIndex=0:s[t]=c=new RegExp(a+t+e,"g"),c}function c(s,a){var e=s.className;e.length?t(a).test(e)||(s.className+=" "+a):s.className=a}function n(s,a){s.className=s.className.replace(t(a)," ").trim()}module.exports={add:c,rm:n};
},{}],"bvtj":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],n=require("contra/emitter"),t=require("crossvent"),r=require("./classes"),o=document,i=o.documentElement;function u(e,u){var d,S,C,T,w,X,x,N,O,Y,E;1===arguments.length&&!1===Array.isArray(e)&&(u=e,e=[]);var M,P=null,B=u||{};void 0===B.moves&&(B.moves=m),void 0===B.accepts&&(B.accepts=m),void 0===B.invalid&&(B.invalid=function(){return!1}),void 0===B.containers&&(B.containers=e||[]),void 0===B.isContainer&&(B.isContainer=f),void 0===B.copy&&(B.copy=!1),void 0===B.copySortSource&&(B.copySortSource=!1),void 0===B.revertOnSpill&&(B.revertOnSpill=!1),void 0===B.removeOnSpill&&(B.removeOnSpill=!1),void 0===B.direction&&(B.direction="vertical"),void 0===B.ignoreInputTextSelection&&(B.ignoreInputTextSelection=!0),void 0===B.mirrorContainer&&(B.mirrorContainer=o.body);var R=n({containers:B.containers,start:function(e){var n=U(e);n&&k(n)},end:z,cancel:Q,remove:J,destroy:function(){D(!0),j({})},canMove:function(e){return!!U(e)},dragging:!1});return!0===B.removeOnSpill&&R.on("over",function(e){r.rm(e,"gu-hide")}).on("out",function(e){R.dragging&&r.add(e,"gu-hide")}),D(),R;function A(e){return-1!==R.containers.indexOf(e)||B.isContainer(e)}function D(e){var n=e?"remove":"add";c(i,n,"mousedown",K),c(i,n,"mouseup",j)}function F(e){c(i,e?"remove":"add","mousemove",L)}function I(e){var n=e?"remove":"add";t[n](i,"selectstart",q),t[n](i,"click",q)}function q(e){M&&e.preventDefault()}function K(e){if(X=e.clientX,x=e.clientY,!(1!==a(e)||e.metaKey||e.ctrlKey)){var n=e.target,t=U(n);t&&(M=t,F(),"mousedown"===e.type&&(h(n)?n.focus():e.preventDefault()))}}function L(e){if(M)if(0!==a(e)){if(!(void 0!==e.clientX&&Math.abs(e.clientX-X)<=(B.slideFactorX||0)&&void 0!==e.clientY&&Math.abs(e.clientY-x)<=(B.slideFactorY||0))){if(B.ignoreInputTextSelection){var n=b("clientX",e)||0,t=b("clientY",e)||0;if(h(o.elementFromPoint(n,t)))return}var u=M;F(!0),I(),z(),k(u);var v=l(C);T=b("pageX",e)-v.left,w=b("pageY",e)-v.top,r.add(Y||C,"gu-transit"),function(){if(d)return;var e=C.getBoundingClientRect();(d=C.cloneNode(!0)).style.width=s(e)+"px",d.style.height=g(e)+"px",r.rm(d,"gu-transit"),r.add(d,"gu-mirror"),B.mirrorContainer.appendChild(d),c(i,"add","mousemove",$),r.add(B.mirrorContainer,"gu-unselectable"),R.emit("cloned",d,C,"mirror")}(),$(e)}}else j({})}function U(e){if(!(R.dragging&&d||A(e))){for(var n=e;p(e)&&!1===A(p(e));){if(B.invalid(e,n))return;if(!(e=p(e)))return}var t=p(e);if(t)if(!B.invalid(e,n))if(B.moves(e,t,n,y(e)))return{item:e,source:t}}}function k(e){var n,t;n=e.item,t=e.source,("boolean"==typeof B.copy?B.copy:B.copy(n,t))&&(Y=e.item.cloneNode(!0),R.emit("cloned",Y,e.item,"copy")),S=e.source,C=e.item,N=O=y(e.item),R.dragging=!0,R.emit("drag",C,S)}function z(){if(R.dragging){var e=Y||C;G(e,p(e))}}function H(){M=!1,F(!0),I(!0)}function j(e){if(H(),R.dragging){var n=Y||C,t=b("clientX",e)||0,r=b("clientY",e)||0,o=Z(v(d,t,r),t,r);o&&(Y&&B.copySortSource||!Y||o!==S)?G(n,o):B.removeOnSpill?J():Q()}}function G(e,n){var t=p(e);Y&&B.copySortSource&&n===S&&t.removeChild(C),W(n)?R.emit("cancel",e,S,S):R.emit("drop",e,n,S,O),V()}function J(){if(R.dragging){var e=Y||C,n=p(e);n&&n.removeChild(e),R.emit(Y?"cancel":"remove",e,n,S),V()}}function Q(e){if(R.dragging){var n=arguments.length>0?e:B.revertOnSpill,t=Y||C,r=p(t),o=W(r);!1===o&&n&&(Y?r&&r.removeChild(Y):S.insertBefore(t,N)),o||n?R.emit("cancel",t,S,S):R.emit("drop",t,r,S,O),V()}}function V(){var e=Y||C;H(),d&&(r.rm(B.mirrorContainer,"gu-unselectable"),c(i,"remove","mousemove",$),p(d).removeChild(d),d=null),e&&r.rm(e,"gu-transit"),E&&clearTimeout(E),R.dragging=!1,P&&R.emit("out",e,P,S),R.emit("dragend",e),S=C=Y=N=O=E=P=null}function W(e,n){var t;return t=void 0!==n?n:d?O:y(Y||C),e===S&&t===N}function Z(e,n,t){for(var r=e;r&&!o();)r=p(r);return r;function o(){if(!1===A(r))return!1;var o=_(r,e),i=ee(r,o,n,t);return!!W(r,i)||B.accepts(C,r,S,i)}}function $(e){if(d){e.preventDefault();var n=b("clientX",e)||0,t=b("clientY",e)||0,r=n-T,o=t-w;d.style.left=r+"px",d.style.top=o+"px";var i=Y||C,u=v(d,n,t),c=Z(u,n,t),a=null!==c&&c!==P;(a||null===c)&&(P&&s("out"),P=c,a&&s("over"));var l=p(i);if(c!==S||!Y||B.copySortSource){var f,m=_(c,u);if(null!==m)f=ee(c,m,n,t);else{if(!0!==B.revertOnSpill||Y)return void(Y&&l&&l.removeChild(i));f=N,c=S}(null===f&&a||f!==i&&f!==y(i))&&(O=f,c.insertBefore(i,f),R.emit("shadow",i,c,S))}else l&&l.removeChild(i)}function s(e){R.emit(e,i,P,S)}}function _(e,n){for(var t=n;t!==e&&p(t)!==e;)t=p(t);return t===i?null:t}function ee(e,n,t,r){var o="horizontal"===B.direction;return n!==e?function(){var e=n.getBoundingClientRect();if(o)return i(t>e.left+s(e)/2);return i(r>e.top+g(e)/2)}():function(){var n,i,u,c=e.children.length;for(n=0;n<c;n++){if(i=e.children[n],u=i.getBoundingClientRect(),o&&u.left+u.width/2>t)return i;if(!o&&u.top+u.height/2>r)return i}return null}();function i(e){return e?y(n):n}}}function c(n,r,o,i){e.navigator.pointerEnabled?t[r](n,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[o],i):e.navigator.msPointerEnabled?t[r](n,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[o],i):(t[r](n,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[o],i),t[r](n,o,i))}function a(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var n=e.button;return void 0!==n?1&n?1:2&n?3:4&n?2:0:void 0}function l(e){var n=e.getBoundingClientRect();return{left:n.left+d("scrollLeft","pageXOffset"),top:n.top+d("scrollTop","pageYOffset")}}function d(n,t){return void 0!==e[t]?e[t]:i.clientHeight?i[n]:o.body[n]}function v(e,n,t){var r,i=(e=e||{}).className||"";return e.className+=" gu-hide",r=o.elementFromPoint(n,t),e.className=i,r}function f(){return!1}function m(){return!0}function s(e){return e.width||e.right-e.left}function g(e){return e.height||e.bottom-e.top}function p(e){return e.parentNode===o?null:e.parentNode}function h(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||S(e)}function S(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||S(p(e))))}function y(e){return e.nextElementSibling||function(){var n=e;do{n=n.nextSibling}while(n&&1!==n.nodeType);return n}()}function C(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function b(e,n){var t=C(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}module.exports=u;
},{"contra/emitter":"qraR","crossvent":"EA8M","./classes":"ivgg"}],"aPLR":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach(function(t){r(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=m();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?f(t):n}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=document.getElementById("chat-input"),y=document.getElementById("user").innerHTML.split(" ")[1],v=document.getElementById("chat-area"),b=document.getElementById("add-text"),h=document.getElementById("add-image"),g=document.getElementById("add-video"),R=document.getElementById("ws-route").value,E=require("dragula"),O=function(e){i(n,React.Component);var t=l(n);function n(e){return o(this,n),t.call(this,e)}return a(n,[{key:"render",value:function(){var e,t=this.props.value,n=t.type,o=t.value,c=t.user,a=React.createElement("i",{className:"m-2"},c),i=React.createElement("button",{type:"button",className:"close mr-2",onClick:this.props.delete},"×");return e="textItem"==n?React.createElement("p",r({style:{fontSize:"20px",flexGrow:1},className:"bg-light"},"className","card-text m-3"),o):"imageItem"==n?React.createElement("img",{src:o,className:"card-image m-2",width:"200px",height:"200px"}):React.createElement("iframe",{src:o,width:"200px",height:"200px"}),React.createElement("div",{style:{width:"250px",background:"#FF9900"},className:"card m-3"},React.createElement("div",{style:{display:"flex",justifyContent:"space-between"},className:"w-100"},a," ",i),e)}}]),n}(),w=function(e){i(c,React.Component);var t=l(c);function c(e){var n;o(this,c),r(f(n=t.call(this,e)),"sortMethods",["value","type","user"]),r(f(n),"onDeleteItem",function(e){var t=e.type,r=e.value;return function(){var e="gets-".concat(t,"-").concat(r);n.socket.send(e)}});var a=localStorage.getItem("sortMethod");return n.state={items:[],users:[],sortMethod:a||"value"},n.initSocket(),n.itemContainerRef=React.createRef(),n.timeout=125,n}return a(c,[{key:"componentDidMount",value:function(){E([this.itemContainerRef.current])}},{key:"initSocket",value:function(){var e=this,t=new WebSocket(R);this.socket=t,t.onopen=function(n){e.timeout=250,t.send("tell-user-".concat(y))},b.onclick=function(){t.send("tells-textItem-".concat(d.value)),d.value=""},h.onclick=function(){t.send("tells-imageItem-".concat(d.value)),d.value=""},g.onclick=function(){t.send("tells-videoItem-".concat(d.value)),d.value=""},d.onkeydown=function(e){"Enter"===e.key&&b.onclick()},t.onmessage=function(t){var r=JSON.parse(t.data),o=r.filter(function(e){return"user"!==e.type}),c=r.filter(function(e){return"user"==e.type});e.setState(n(n({},e.state),{},{items:o,users:c}))},t.onclose=function(){e.timeout+=e.timeout,console.log("Socket is closed. Reconnect will be attempted in ".concat(e.timeout," milliseconds.")),setTimeout(function(){e.initSocket()},e.timeout)}}},{key:"getComparisonFunctionFor",value:function(e){return function(t,n){return t[e]==n[e]?0:t[e]>n[e]?1:-1}}},{key:"setSortMethod",value:function(e){localStorage.setItem("sortMethod",e),this.setState(n(n({},this.state),{},{sortMethod:e}))}},{key:"render",value:function(){var e=this;return React.createElement("div",null,React.createElement("div",{className:"d-flex justify-content-between pt-3"},React.createElement("div",{className:"col-2"},React.createElement("div",{className:"btn-group-vertical"},this.sortMethods.map(function(t){return React.createElement("button",{onClick:function(){return e.setSortMethod(t)},key:t,className:"btn btn-outline-secondary".concat(e.state.sortMethod==t?" active":"")},"Sort by ",t)}))),React.createElement("div",{ref:this.itemContainerRef,className:"d-flex justify-content-start flex-row align-items-left flex-wrap"},this.state.items.sort(this.getComparisonFunctionFor(this.state.sortMethod)).map(function(t,n){return React.createElement(O,{id:n,key:t.value,value:t,delete:e.onDeleteItem(t)})})),React.createElement("div",{className:"d-flex flex-column"},this.state.users.map(function(e){var t=e.value;return React.createElement("i",{key:t,className:"btn btn-".concat(t==y?"info":"secondary"," m-2")},t)}))))}}]),c}();ReactDOM.render(React.createElement(w,{},null),document.getElementById("root"));
},{"dragula":"bvtj"}]},{},["aPLR"], null)
//# sourceMappingURL=/websocket.js.map